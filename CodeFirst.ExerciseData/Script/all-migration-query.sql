DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'CodeFirst.ExerciseData.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '202005271844268_InitialModel'
BEGIN
    CREATE TABLE [dbo].[Genres] (
        [Id] [tinyint] NOT NULL,
        [Name] [nvarchar](max),
        CONSTRAINT [PK_dbo.Genres] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Videos] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        [ReleaseDate] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.Videos] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202005271844268_InitialModel', N'CodeFirst.ExerciseData.Migrations.Configuration',  0x1F8B0800000000000400D558DB6EE336107D2FD07F10F8D4025933979736907791759222E83A09226FDE6969EC10252995A4026B7FAD0FFDA4FEC20E75972C394E36C86E112090C899C39933178EFCDF3FFFFA1F3652788FA00D8FD5941C4D0E89072A8C23AED65392DAD5BBDFC887F73FFFE45F4472E3DD5772274E0E35959992076B93534A4DF800929989E4A18E4DBCB29330969445313D3E3CFC9D1E1D51400882589EE7DFA5CA7209F90BBECE621542625326E67104C294EBB813E4A8DE3593601216C294CC50E2926B6327171BD0213770CE2C23DE99E00CAD0940AC88C7948A2DB368EBE9670381D5B15A07092E30B1C81240B91513064A1F4E1BF17DDD393C76EED046B1820A536363F94CC0A393921FDA577F11CBA4E60F19BC40A66DE6BCCE599C923F4069F4BC7FD2E94C682735C6F024D73BF086770FEADCC014727F28980A9B6A982A48AD66E2C0BB4D9782877F42B688FF023555A9106D4BD156DCEB2CE0D2AD8E13D036BB835569FF55443CDAD5A37DC55AADA55338F731B3E8FC359ECD9602EA3CA03BD5DDFF0A0093096B837873B6F9046A6D1FA6041F8977C93710552B25EA67C5B19450C9EAB477884F9BC0EC0CD73D8F207E41B872BDFF7DB8AE943D391E88578B88C0C61A303941330BD12DB316B472189053F91D62BB7DC81D086039F5F559EE79C1E553C9B83B4FB0715AC6D1F52659BEE48BB0B1033983BDB04C1B53DADDB5BA000DC0B65B85215E6342D16027650FA1BBD5F3141C522F737AC8CFDAA3E60EA0C525505D1674E4B6F0E72C49307CADDBA35CF182F2EA78173CBF9FCA02838666A0ADD6D6D6276132B235F4765B45EAAA6FC95C946791DC12EBC46F84DCEAA84E88FA75D8505E89BBE74265577FEF0335245EA25F124B2A77116A6BAAFB644B2FBFBC99607AA0B667B148A51AEB0FBBB48B6A6DEB172BDB083EED19DEA7886E71D4EB527DC6F78A4799F3AF108FA2489E1F8F11BDEF1D8F31844E6B6C037536DE38BE5BDDA82F529F5E77A55EF7F1CB4EF08C81B66A0D8508F190A8478C25B685203316E4244F8BE06F31131CFD6D04E64CF115185B5CD404E7C9E3DE3CFCE3CCA6D49848EC33A0BEF9A861B9CAB8A3F51B8643F5C874F8C0F42F926D7E6D237DF300F8E674E4543C395BBD0D577B0D54113EDBD71EA8B6EFED3D26A6F181A9286DB47589E3CFA2B0B11AB2F619A6C667A921E46AFE7AE19CB5DDC17CDAFE70F7CFC1F07503E13EE31584AE3534A095CC955AC5550CD1A9B64595482FC473B00C63CACEB4E52B165ADC0EC1987C40BF672245910BB984E84ADDA43649ED99312097A233F0FB74F7F9F930D9B5D9BF49DC9B790D17D04CEED2F2467D4CB9886ABB2F07D27204C22560598068157EA020DC3AAB91AE63B5275049DF3924A05CF92E402602C1CC8D0AD823BCC436FC9CF8046B1666D545340EF27420BAB4FBE79CAD3593A6C468F4DD8F51D4FD1AF5FE2BE50A4646BF120000 , N'6.1.3-40302')
END

IF @CurrentMigration < '202005271847363_PopulateGenresTable'
BEGIN
    INSERT INTO GENRES VALUES(1, 'Comedy')
    INSERT INTO GENRES VALUES(2, 'Action')
    INSERT INTO GENRES VALUES(3, 'Thriller')
    INSERT INTO GENRES VALUES(4, 'Horror')
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202005271847363_PopulateGenresTable', N'CodeFirst.ExerciseData.Migrations.Configuration',  0x1F8B0800000000000400D558DB6EE336107D2FD07F10F8D4025933979736907791759222E83A09226FDE6969EC10252995A4026B7FAD0FFDA4FEC20E75972C394E36C86E112090C899C39933178EFCDF3FFFFA1F3652788FA00D8FD5941C4D0E89072A8C23AED65392DAD5BBDFC887F73FFFE45F4472E3DD5772274E0E35959992076B93534A4DF800929989E4A18E4DBCB29330969445313D3E3CFC9D1E1D51400882589EE7DFA5CA7209F90BBECE621542625326E67104C294EBB813E4A8DE3593601216C294CC50E2926B6327171BD0213770CE2C23DE99E00CAD0940AC88C7948A2DB368EBE9670381D5B15A07092E30B1C81240B91513064A1F4E1BF17DDD393C76EED046B1820A536363F94CC0A393921FDA577F11CBA4E60F19BC40A66DE6BCCE599C923F4069F4BC7FD2E94C682735C6F024D73BF086770FEADCC014727F28980A9B6A982A48AD66E2C0BB4D9782877F42B688FF023555A9106D4BD156DCEB2CE0D2AD8E13D036BB835569FF55443CDAD5A37DC55AADA55338F731B3E8FC359ECD9602EA3CA03BD5DDFF0A0093096B837873B6F9046A6D1FA6041F8977C93710552B25EA67C5B19450C9EAB477884F9BC0EC0CD73D8F207E41B872BDFF7DB8AE943D391E88578B88C0C61A303941330BD12DB316B472189053F91D62BB7DC81D086039F5F559EE79C1E553C9B83B4FB0715AC6D1F52659BEE48BB0B1033983BDB04C1B53DADDB5BA000DC0B65B85215E6342D16027650FA1BBD5F3141C522F737AC8CFDAA3E60EA0C525505D1674E4B6F0E72C49307CADDBA35CF182F2EA78173CBF9FCA02838666A0ADD6D6D6276132B235F4765B45EAAA6FC95C946791DC12EBC46F84DCEAA84E88FA75D8505E89BBE74265577FEF0335245EA25F124B2A77116A6BAAFB644B2FBFBC99607AA0B667B148A51AEB0FBBB48B6A6DEB172BDB083EED19DEA7886E71D4EB527DC6F78A4799F3AF108FA2489E1F8F11BDEF1D8F31844E6B6C037536DE38BE5BDDA82F529F5E77A55EF7F1CB4EF08C81B66A0D8508F190A8478C25B685203316E4244F8BE06F31131CFD6D04E64CF115185B5CD404E7C9E3DE3CFCE3CCA6D49848EC33A0BEF9A861B9CAB8A3F51B8643F5C874F8C0F42F926D7E6D237DF300F8E674E4543C395BBD0D577B0D54113EDBD71EA8B6EFED3D26A6F181A9286DB47589E3CFA2B0B11AB2F619A6C667A921E46AFE7AE19CB5DDC17CDAFE70F7CFC1F07503E13EE31584AE3534A095CC955AC5550CD1A9B64595482FC473B00C63CACEB4E52B165ADC0EC1987C40BF672245910BB984E84ADDA43649ED99312097A233F0FB74F7F9F930D9B5D9BF49DC9B790D17D04CEED2F2467D4CB9886ABB2F07D27204C22560598068157EA020DC3AAB91AE63B5275049DF3924A05CF92E402602C1CC8D0AD823BCC436FC9CF8046B1666D545340EF27420BAB4FBE79CAD3593A6C468F4DD8F51D4FD1AF5FE2BE50A4646BF120000 , N'6.1.3-40302')
END

IF @CurrentMigration < '202005271855439_AddRelationshipToTables'
BEGIN
    ALTER TABLE [dbo].[Videos] ADD [Genre_Id] [tinyint]
    CREATE INDEX [IX_Genre_Id] ON [dbo].[Videos]([Genre_Id])
    ALTER TABLE [dbo].[Videos] ADD CONSTRAINT [FK_dbo.Videos_dbo.Genres_Genre_Id] FOREIGN KEY ([Genre_Id]) REFERENCES [dbo].[Genres] ([Id])
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202005271855439_AddRelationshipToTables', N'CodeFirst.ExerciseData.Migrations.Configuration',  0x1F8B0800000000000400D559DB6EE336107D2FD07F10F4D41659CBC9BEB486BD8BAC93144637174449D0B78096C60E518A52492AB05BF4CBFAD04FEA2F74A8BB48C991DDDD6C8B008143728673399C99E3FCFDE75FD3F79B8839CF20248DF9CC3D1E8D5D0778108794AF676EAA566FBE77DFBFFBFAABE979186D9C87F2DC5B7D0E25B99CB94F4A2513CF93C11344448E221A8858C62B350AE2C82361EC9D8CC73F78C7C71EA00A177539CEF436E58A4690FD817FCE631E40A252C22EE310982CD671C7CFB43A57240299900066EE1C4F5C5021D5E87C0322A012CE8822AE73CA28416B7C602BD7219CC78A28B475722FC15722E66B3FC105C2EEB609E0B91561120A1F26F5F1A1EE8C4FB43B5E2D58AA0A52A9E2684F85C76F8BF878A6F8415176ABF86104CF31D26AABBDCEA238737F042ED073F3A6C99C097DAA2FC2A34CEEC8E9DE3DAAB08110D23F7830652A1530E3902A41D89173932E190D7E82ED5DFC0BF0194F196B5A8AB6E25E6B01976E449C8050DB5B5815F62F42D7F1DA729E295889356472E73E6C153A7F85779325830A07DE4E71FDBB548060C2B7E13A9764F311F85A3DCD5CFCE83A17740361B95268BDE7149F120A2991DA975C9167BACE626F5CF7404388A5EBDC02CBB6E5134D72648FB2ADC7228517228E6E63564AE4CB8F7744AC41A1B9B1BDE7C7A9080C4BA65E0D919DC0C9141D009C4CEE7F0F9C05576F4F3A90D30884AF6201186810444178439402C1B50EC842F96550665C8298029285BEBA4B7FBEA3D18067D18BD802908701B6046517604B300F01ECA994714033039A882D2E6F7B72CE43678725790E2AFB310F88499A200AF1DE99FB9D15996E7DD553ACF5159168EB1B8F46C7A68F0D6FEC57890D53118A40AB1DFD2D5B848DEA78A1D8038B472A0B9498D66BA53EA8663AB100D5716E5B6F39DF162FEB97255E04D3106F786AE82871D338D1012BF3E5EFCE6D656C6DA7374C4399CD86863250665969BBD481DD2A81F5A8E3E5B34E3913793D43D1F4922409D686C69054AC387E3121BDF1F71F1BA25C8717C88EE9A1B2B6BA092B1D5983B1DBE800BAB42F892E21F330B28EB5E0DA83A5F2AA1622ED4495082B8FEBCFB9C8AE31C6545407F102FD8AB05E672E82996A5B2E9B510923A2A371CC639646BCAFF9EC92CE5B41533E5FB1354C3DC37033449E152303AB66C407E5A3783A9F201F794DD83F1F3D725F3A1F7D1A5A7DB7A9A8B5F1FAF96D57AA8E249735785822CBD383B2A5EB6CD7E8DBAEB77648062538D7D195661D92EADEFD4C2A9AC88126ED6D0C96C89066F3CC42EAD9AC9ACB86386A76213BFD5633328F54E0AB9A92D17CA64523D883B6979D213FE23AE8FB334618BB82BF950AA2510626FF57366714E15E1FB8249CAE40AA9C04B8C89A4F0CD6FFDF61E09E94211B42C35F9DC628CAB75487F55F5060FE4C44F044C43711D97CDBD46413903DC9E5AB87230BC58BBCED75623588AC85F8590D226B5D14EDB10308165B58F0103633F7F74C70E22C7E7E2C658F9C6B812F71E28C9D3F0ECBFB611CADD182F6A351F62C7F08B943B081D058200C4BA554028BA5D5876F90B0073421AC65B3DD29862058C7AFD267EE9C41025C43B3E5D6908B76B5C44AABF1945EF27D4FA26A1384014CB49F88E64D045FC552273607630F27EB24A9FD1CB54B73375FFC8CFCB5E57D8385BCC8586D9AFB7938AADDFE11318DEFF611AC92AE6B157AA2E110B4B0529D59F0555C82D6B0A83C62D4B44B50040B2239158AAE48A0703B0029B36FCE1E084BF1C879B48470C1AF5395A40A5D8668C95ADFC469E8EFBA3F23E26D9BA7D749F62DD7A77001CDA4BAA65FF30F29656165F7855DD3FB54E83755742F9D4BA5BBD87A5B69BA8AF9404545F8AA52700751C25099BCE63E7986436CBB97F011D624D896535CBF929713D10EFBF48C92B520912C74D4F2FAFF559EFE87D5BB7F007D493B34E21A0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '202005280605226_AddClassificationEnumToVideosTable'
BEGIN
    ALTER TABLE [dbo].[Videos] ADD [Classification] [tinyint] NOT NULL DEFAULT 0
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202005280605226_AddClassificationEnumToVideosTable', N'CodeFirst.ExerciseData.Migrations.Configuration',  0x1F8B0800000000000400D559CD6EE33610BE17E83B083AB545D6B2934B1BD8BBC87A9385D175124449D05B404B63872845A92415D85BF4C97AE823F5153A94A83F4A7664379B6DB1C0C222678633C36FFE98BFFFFC6BFC6E1D31E70984A4319FB8A3C1D07580077148F96AE2A66AF9E647F7DDDB6FBF199F87D1DAB92FE84E341D727239711F954A4E3D4F068F10113988682062192FD52088238F84B1773C1CFEE48D461EA008176539CEF826E58A46907DE0E734E601242A256C1E87C0A459C71D3F93EA5C920864420298B853A4B8A042AAC1F91A4440257C208AB8CE19A304B5F1812D5D87701E2BA250D7D33B09BE12315FF9092E1076BB4900E996844930369C56E47DCD191E6B73BC8AB11015A452C5D19E024727C63F9ECD7E9097DDD27FE8C173F4B4DA68AB332F4EDC8FC0055A6E9F743A6542536DF3F020E33B72BA778F4A6C2084F43F244C994A054C38A44A1076E45CA70B46839F61731BFF0A7CC253C6EA9AA2AEB8D758C0A56B112720D4E6069646FF59E83A5E93CFB3194BB61A4F6EDCFB8D42E32FF16CB26050E2C0DBC9AEFF2F04209830365C674ED69F80AFD4E3C4C59FAE7341D710162B46EA1DA7184AC8A444DA3EE4923CD155E67BEBB87B1A422C5DE70658B62D1F6992237B906D3D982BBC10717413B382235F7EB82562050AD58DDB7B7E9C8AC0D264EC5510D9099C4CD001C0C9F8FEF7C099717572DC819C9A237C150B404783200AC26BA21408AE6540E6CAAF8332EB10C41490CCF5E559FAF72D8DF60F8B292352D2250D4CAA32AA6B9CDA5BCF49DE1A0B06EA87854201F7AE5028C2A45F28A4512D106CE366F28291555554F68E90BCEA594E7BE988419C8420D80671554B85CD6B9843B40061CCF429C3C6C075EE094BF173D4BAB406F5C7988525EDF16EDA6B7D99E8D392FEA47D0FB9C7EB8B6752C601CD7C53CF480602CDE3CE79E8ECC043055493D4E6E8419AA0CFF0F627EE0F2DF5BBE595A9B69267F0D894371C0C46B685356BDA59171B2245282F1D86877ECE1661AD3AF0853D8E81983459C0D65E0BF541D5830A0B4C85F6A6F62DE39BEC457D6AB11B675AEC354B2D1945F4D6283A82DBCEECBBEFB654B6D2D3EB27A1B8CD9A84C25176D9689AD49141CA0BAC5A592FEF658B9ED7DBD2F48EE7244930466B4DB059717CD301BFF1F76F0BA35C8617C88EEEB0D4B63C092B195981B55BCB5F3A112D884E76D3306A9135E0BA054BC5510D44B62FAA405841AE7F9B2CBCA34DB505554EBC40BB22ACC79989605F759B2F9B410823A2A33198C62C8DF8B6E66217775EEAEBFCF94A5BC2D8B314B75DE4B57C6461D5F678AFFB30A1F302F791E784FDEF630BDFD7BE8F6D121A7D555D5063A3BF3CBBC7A88BB4F75E1F35CDFCD7019D22B3F7834741DD0B033A7B770D4CCD2CDE76492FD8E432BAC0A35D529EBB9F4AA6341DA8D2DECA60E20D69D625CDA4EEBBCBBEB48FA1766D6B5F7FABC4D92425F8CA526795B4B1292F7B3CF614F52627711DB4FD093D8CB5C6DF4805D1200393FF1B9B328A70AF08E684D325489537C2EEF170746CBD15FD77DE6D3C2943D6E7F1E6D5875FECD6716E50FFEAE1843F11113C12F15D44D6DFD725B5C7D63D9F245EDD1D992B9E9DF65FC757BD46FC107FAB971BF10F854395742C39AD896686B3EA7AE2FE9E319E3AB35F1E0ADE23E74A605C9F3A43E78FC35074D81C592B68FB8D7AED79E3900114A10B42238B304CBC12C77CDAAEEAD782F280268435746ED79D3EF1A0FD57CAB3773E40025C03BD61569F837615D852AA1598CFD9BEE730DD1E627A4CCBDB87E5BC24618C2DF4C5E660DC3237760ED2DBE7E82EC9DD33ED179CB11BD6D726A567A7EAF628FE65E6E876338188A9FD7D09C12AE9AA12A1FB230E41032B25CD8C2FE302B49646058995D3E6A008A6577226145D9240E176009833F5EBAD79DD3A8F1610CEF855AA9254A1C9102D58E33558437FD7F9D9634153E7F15592BD87BE8409A826D515E28ABF4F69ED15EFA29DD3B789D031656AA1BE4BA56BE26A534ABA8C794F41C67D652AB8852861284C5E719F3CC121BADD49F8042B126C8A9E70BB90E72FA2E9F6F1074A568244D2C8A8F8F113311C46EBB7FF0010F84B73661D0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '202005291729271_ModifyModelsUsingFluentAPI'
BEGIN
    ALTER TABLE [dbo].[Videos] ADD [GenreId] [int] NOT NULL DEFAULT 0
    ALTER TABLE [dbo].[Genres] ALTER COLUMN [Name] [nvarchar](255) NOT NULL
    ALTER TABLE [dbo].[Videos] ALTER COLUMN [Name] [nvarchar](255) NOT NULL
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202005291729271_ModifyModelsUsingFluentAPI', N'CodeFirst.ExerciseData.Migrations.Configuration',  0x1F8B0800000000000400D559DD6EDB3614BE1FB077107439A496EDA0C016D82D5237298CD54910A5C5EE025A3A76885194465281DD614FB68B3DD25E618712F547C98EECA55987028545F21C9E9FEFFC317FFFF9D7E4ED2662CE230849633E754783A1EB000FE290F2F5D44DD5EAD58FEEDB37DF7F37B908A38DF3B93877AACF21259753F741A9E4CCF364F00011918388062296F14A0D8238F248187BE3E1F0276F34F20059B8C8CB7126B729573482EC033F67310F205129618B380426CD3AEEF81957E78A44201312C0D49DE1894B2AA41A5C6C400454C27BA288EB9C334A501A1FD8CA7508E7B1220A653DFB24C15722E66B3FC105C2EEB609E0B91561128C0E67D5F1BEEA0CC75A1DAF222C5805A954717420C3D1A9B18F67931F6565B7B41F5AF0022DADB65AEBCC8A53F70370819ADB379DCD98D0A776597890D19D38DDBB2725361042FA1F1E4C994A054C39A44A1076E2DCA44B46839F617B17FF0A7CCA53C6EA92A2ACB8D758C0A51B112720D4F6165646FE79E83A5E93CEB3094BB21A4DAEDCBBAD42E5AFF06EB26450E2C0DB4BAEFF2F18209830365C6741361F81AFD5C3D41DBF7EED3A97740361B162B87EE21443098994487BDC7A451EE93A738675FF671A422C5DE71658B62D1F6892437D906DDD1B9F5E8A38BA8D5941912FDFDF11B10685F2C7ED3D3F4E45604932F12ACCEC4552C6E808246574FF7B24CDB93A1D7738B566085FC502D0D0208882F0862805826B1E9099F21B819D752B820C48E68BF272FDFB8E4687F3CA40F6B4C9F633993122255DD1C0644463108D7E7BEBE8083301745C801541D4156045F0F50BB034AA8597ADDC5C5E32B2AE6AD7C171971757CB68CF1D8788BE1004DB225A6B19B7E98605444B10464D9F32EC3F5CE73361297E8E5A4E6B9CFE10B3B03C3BDE7FF6463B136D5A9E3F6DFB21B7787DF15CCA38A0996DEA79CE40A079DD050F9D3D78A8806A52E5022D4813B4197A7FEAFED012BF9B5F99C02B7E068F4D7EC3C160646B58D3A69DCBB1EF5284F2D26078E9976C1136AA035FD84A198849935B6CE935531F543DA8B06C55686F4ADF52BE495E54BD16B931A6455ED3D4E251446FED444770DBF562BF6F4B612B39BD7E1C0A6FD6381486B28B5153A58E0C523AB0EA98BDBC652E5A6B6F476F3D599024C118ADF5DA66C5F14DA3FDCA3FBCFB8C721E5E203B9AD052DAF226AC8F640DD66E2D7FE944B4243AD9CDC2A875AC01D71D582AAE6A20B2EDA80261C571FDDB64E13DDDB0CDA832E225EA156195CF5404DBD56DBA6CD4218C888E766316B334E2BB5A967DD4790351A7CF57DA1C269E25B86D22AF65230BABB6C57BF9C384CE33F823CF0987FB6307DD7FED8F5D1C1ACD599D5163A33FBFB241ABF32A17FBF3B17B953A3B7BEFE5D1D7CCA31D102C2A443F9815A77B61495781AE71AE590DDA26E905BF9C4797ABB449CA7B0F13C994B823453A58184CE021CDBAADB9D4FD7BD9DFF651D4AE916DF7B74AA57DA4045F5932ADD2383165EA80B7A9A26EE5475C07757F440B63CDF2B7524134C8C0E4FFC6668C22DCAB030BC2E90AA4CA1B6A773C1C8DADA7AD6FE799C99332647DDE9A5E7C34C7AE1FE70FF5AFDE79F82311C10311ED917B2FD3031F4F5EDC3499599E7C977879BBF57A8708F1B77A86778863B0D1FD0A712CD2AA7C66F1690D5D731CA73753F7F78CF0CC99FF725FD09E38D70253C6993374FEA80B90BFFAF401E571A36EAD561E368DB647A26366648C04101AA884614E974A60566F350C3782F280268435646E97B43EE1A5ED57F2B377DE43025CC74D43AD3E17EDABDD25572BCE9FD2FDC079BF3D67F518E877CFF379B5C3305D6AC7E660DC31DA76CEFABB47FD2ECEDD63F7577C0668685F1BE69E1CFCDBAF055F67D46FF7298898DA5FDA10AC92AE2B16BAF5E21034B0529E99F3555C80D692A83862E5B4052882199A9C0B45572450B81D00E64CFD6C6D1EE02EA22584737E9DAA2455A832444BD67806D7D0DF777FF69ED19479729D644FB6CFA1028A497591B9E6EF525A7B68BCEC28F43B58E89832A555FB52E912BBDE969CAE62DE9391315F990AEE204A183293D7DC278F708C6C9F247C843509B645BBB99BC9D38E689A7DF29E92B52091343C2A7AFC440C87D1E6CD3F9C670317701E0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '202005291756294_CreateVideoTagRelationships'
BEGIN
    CREATE TABLE [dbo].[Tags] (
        [Id] [int] NOT NULL IDENTITY,
        CONSTRAINT [PK_dbo.Tags] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[VideoTags] (
        [VideoId] [int] NOT NULL,
        [TagId] [int] NOT NULL,
        CONSTRAINT [PK_dbo.VideoTags] PRIMARY KEY ([VideoId], [TagId])
    )
    CREATE INDEX [IX_VideoId] ON [dbo].[VideoTags]([VideoId])
    CREATE INDEX [IX_TagId] ON [dbo].[VideoTags]([TagId])
    ALTER TABLE [dbo].[VideoTags] ADD CONSTRAINT [FK_dbo.VideoTags_dbo.Videos_VideoId] FOREIGN KEY ([VideoId]) REFERENCES [dbo].[Videos] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[VideoTags] ADD CONSTRAINT [FK_dbo.VideoTags_dbo.Tags_TagId] FOREIGN KEY ([TagId]) REFERENCES [dbo].[Tags] ([Id]) ON DELETE CASCADE
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202005291756294_CreateVideoTagRelationships', N'CodeFirst.ExerciseData.Migrations.Configuration',  0x1F8B0800000000000400ED1ADB6EDB36F47DC0FE41D0E3D05A7182025B60B7489DA430B65C10A7C5DE0A46A21D6214A59154606FD897ED619FB45FD82175A7285952DDAC1D8602454CF21C9EFB85477FFFF9D7ECCD36A4CE13E682446CEE4E2747AE83991F05846DE66E22D72FBF77DFBCFEF69BD945106E9D0FF9B913750E209998BB8F52C6A79E27FC471C22310989CF2311ADE5C48F420F0591777C74F483379D7A1850B880CB716677099324C4FA07FC5C44CCC7B14C10BD8A024C45B60E3B2B8DD5B946211631F2F1DC5DC0894BC2859C5C6C31F789C0E74822D739A30401352B4CD7AE83188B249240EBE97B815792476CB38A6101D1FB5D8CE1DC1A5181331E4ECBE37DD9393A56EC7825608ECA4F848CC28108A727997C3C137C9494DD427E20C10B90B4DC29AEB514E7EE3BCC38706EDE74BAA05C9D6A93F044C3BD70ECBB2F0ADB001352FFE0604265C2F19CE14472445F38B7C90325FE8F78771FFD82D99C25945629055A61AFB6004BB73C8A3197BB3BBCCEE85F06AEE3D5E13C13B000ABC0A4CCBDDD4960FE1AEE460F141776E07582ABFF7304604CE01BAE7385B63F61B6918F73F7F8D52BD7B9245B1CE42B19D6F78C802B0190E4498F5BAFD113D9686518F77F20018E84EBDC61AAB7C5238953539FE8AD8F994E2F7914DE45348748973FDE23BEC112E88F9A7BAB28E1BE41C9CC2B6DA6D39234A21196A4E1BE7A4B5A3279726C516A45102B19710C82C61C491CDC222931670A07D6A2FC42CCCEB8158C0C23AD8BE272F5F73D0987E3D246B65F64DD4816140941D6C4CF2262261065FDE6D6680FCB1C689C83E54E6473B0DCF9FA12728F365D8E9E6E9B64A8D5162AF4968D88DE5E0E1846F8789AC82700FCBFA3371D7D7CA4EF30007B9CAFD9463F0348C28AFA4D175B8A4B0A280B298CB58C3ADE431B09C4C00073BA839859C9FB75255CE1F001F38CCD15A15005BBCE074413F8396DA8AC76FA5D4483E2EC71F7D95BA549906971FEA4A98754E2D5C53321229F68D9544D230B44F5EB2E58E07444A5325C6609FB0A2448629019687FEE7ED720DF8EAF30AF125F1615EBF88E2693A9C961859B3E4C6A23EFA6A91EF23E99C5BA0395E874F0EB44D6CA5CEA5DD0DA484458610D70DD6F7A116FA5C579A05BC9FC4764E9DBA45B215D6159CD5B10104A57AEABA6C1761D3C0F370DF04C8C7BC0D360D400D64233402B4232AECF736BE58425F59A41BEDBE60B424B16BD7E18721BA860C8656C66903A4BBDD94D85D6C66DD3F4F719FF185E6BE65E4190D2D69BD13C8514465E36EE5EDAB9E71DBED7D2E2CFAE501C4390AEB4FCD98AB3CAFAFD97ABE14D7098E2F07C61E9850B6A8B9B207BA30D36762B094C65A207A4B2DD22081BC76A2EDDE230F95535AF6D6A2977A4FCB8FA3B4BC31D4DB989A814E225F015420DA259C4A64D37E1F48B0BA2885B8AA145449390B515545DD0691F53854F579A18669E41B82922AF2123C3564D89F7D247E63707D0471A3787EBA305EEDFD6471B865A8F584554DBE88FAFE813ABB88AC5FE78CC62B58ACEDCFB62ACAF25E40FB63D9576875B9E15EAD3ECEE73CBB19E8F2CAE9C9714FDDC353FDDCB27552AB5F56CF5F2A129925EE24C71D884AA4452DC3B8CA4AC4E1849D260622011064457F44BA15AE6A251ECC3A8596B8C547F5AC6F4D47E7AD8AA7C8B6FB40ABB5A938D94B5467430ED576BBC9104018A61E4ECD75FA364348F14C1A3281D8D127196956B03464579FD961E711DA0FD096404B5DB6A27240E27DA1C56BFD2052510AECA035788913516327D59708F8FA6C7C6A4E9CB99FA784204B4CFE8E7D91FD024613BA2C4FA096317F684B8FF8878F305BC13E9C059C6B38B468B65EFEBE1F3CBADD7582080BFE501C602636CC33E14186B69653E32F0341E68962CC0DBB9FBBB063C75963F7FCC615F38371C42C6A973E4FC5125201DC28C7E7AFF1A4D7298D78DE4B23D5B36CF5A13D97EA114575424D3C32232B03683E8659119C5C32ED64003AE6DD3D3B8C7E74AD13DEC7DB8F94035E64917B48DB9324F44A1B810924379D1E83C6E39613E8911ADD1DC2C8FFA3895925F81CFDC39C73166CA5B6A6CF5B9A8AB0928B01A86BC8FF7512FF0D66A76B8A6A68D12FA869D433291D839F3D3626981848F82A64FA83AB3F376FDD26C12B0FFCD7EACB5F457E221ACC5DECF0F0984CF6C2FB666A3A2315359163DFD876CA5AFF69ED3525AFBB983DB897DF8D57C506F7920AB7F95D136DC4ADB39A8431F54184AB35CCBB0C63AF86A9F7BD930DB872BB69958DB48CC86D53A71B1526B475C6EB5D26CBDE2F3CDE36A4AAB0C1BF64EA59AA3AC83CEDC8A8159D7E8ADE5056738A92DF1C7F6C2745026F3A15E2793F6572133541B8FC4CFC1E0808162F31508C255E5B3628894826C4A14EA619261BF16A88A334BB68EF2706950941F31EAF32B2C11F4BFE88C4BB246BE846D1F4347AABED1CBBEF3B8081F70B06437898C13092CE3F081D63E055271B7EB7E3D35ADD33CBB89F56741876001C824AA85BF616F1352F99EE5D2D228B4A050013DEB12952EA5EA1637BB02D375C47A22CAC457E4A17B1CC61490891BB6424F780C6DEF05FE096F90BFCB1FF3DA91EC57445DECB37382361C8522C351C2C34FB0E120DCBEFE07458D7E605D2F0000 , N'6.1.3-40302')
END

IF @CurrentMigration < '202005291836003_ModifyExistingConflict'
BEGIN
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Genre_Id' AND object_id = object_id(N'[dbo].[Videos]', N'U'))
        DROP INDEX [IX_Genre_Id] ON [dbo].[Videos]
    DECLARE @var0 nvarchar(128)
    SELECT @var0 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Videos')
    AND col_name(parent_object_id, parent_column_id) = 'GenreId';
    IF @var0 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Videos] DROP CONSTRAINT [' + @var0 + ']')
    ALTER TABLE [dbo].[Videos] DROP COLUMN [GenreId]
    EXECUTE sp_rename @objname = N'dbo.Videos.Genre_Id', @newname = N'GenreId', @objtype = N'COLUMN'
    ALTER TABLE [dbo].[Videos] ALTER COLUMN [GenreId] [tinyint] NOT NULL
    ALTER TABLE [dbo].[Videos] ALTER COLUMN [GenreId] [tinyint] NOT NULL
    CREATE INDEX [IX_GenreId] ON [dbo].[Videos]([GenreId])
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202005291836003_ModifyExistingConflict', N'CodeFirst.ExerciseData.Migrations.Configuration',  0x1F8B0800000000000400ED5ADD6EDB3614BE1FB077107439A4567E50600BEC16A99314C1E62488D362770523D10E318AD2442AB037ECC976B147DA2BEC50A264893FB2E4B8593B0C058A98E4393C3CE73B3F3CD4DF7FFE357EBB8AA9F784334E1236F18F4687BE87599844842D277E2E16AFBEF7DFBEF9F69BF14514AFBC8FD5BA13B90E28199FF88F42A4A741C0C3471C233E8A4998253C59885198C4018A92E0F8F0F087E0E828C0C0C2075E9E37BECB9920312E7EC0CF69C2429C8A1CD1591261CAD538CCCC0BAEDE358A314F518827FE14565C928C8BD1C50A6721E1F81C09E47B67942090668EE9C2F71063894002643DFDC0F15C64095BCE531840F47E9D6258B74094637586D3CDF2BEC7393C96C709368415AB30E7228907323C3A51FA0974F29DB4ECD7FA030D5E80A6C55A9EBAD0E2C47F8F590627D7773A9DD24CAE72697854D01D78F6D9831A1B0021F90F16E654E4199E309C8B0CD103EF367FA024FC11AFEF935F309BB09CD2A6A4202BCCB50660E8364B529C89F51D5E28F9AF22DF0BDA74814E58933568CAC3BD5B0B38FC35EC8D1E28AE71107492CBFF2B060026F00DDF9BA1D54F982DC5E3C43F7EFDDAF72EC90A47D588E2FA81117025201259DE63D76BF444968531B4FD3F920827DCF7EE302DA6F923494BA88F8AA94FCAA6975912DF25B4A228873FDDA36C8905C89F9873F324CF424D9271B0C14C27920A463B20A9A0FBEA9174C5C4C9B1C5A80D45CC4592615034CE90C0D12D1202674CF2C0852ABF10D869BB02C8302A6C516F2EFFBE27F1705E05C89EE97C538A38270B12AA80A8F421C1AF4FEDEC60CA7F76F3AFCA876CFE55F95E5F41EED1B2CBCFCB695D0C39EA90A298B209D1DBC981C30E2E5EE6F11110FFEFE7A69FEF1EE83B00600FF32D6CF403401E37CCAFBBD815BFA4C0B2D6C2AEC868F3DD374820044638A36B08998DC8D336C20CC70F3853C79C130A45B0EF7D4434879F4786C95AABDF2734AAD71E77AFBD9596049DD6EB4F4C3B941A6F0E9E719E84A4D04D131A2A10B5B7BB6091D7119536E152E5EB196890A4A033B0FEC4FFCE10DFCEAF86D7869F8A8A6D7EA6EAC01171263D015128F439588D30617A2D61214911756FAD91F47475A9E19AB93E738E53CCA497BA15D867D73ACD995BD73B68F1679B52C64103027D905144866E43B6F3C4B371D18E3A1B7645C6E864E63C5C1992402102D451BB106CF75B318857C21271E086A7820E57258F2EB7643AC7A2692D88A29BF8D7C6B371EC367915A30D72A5C62DE4650437880BA569A40D2569DB5705496385A55ED1C1D81D286A41374734E0DC1D1A1A1C2A1DEB69B77DA4DEC72D95E63AAD09FD6DE0DFE5AC2DB8371894B2F53E6895776B906F9A1D41D9EDA8BA2281A32D329EA13485CCD66893A8116FAE7A24AFE6C31B0771C92308B9A57F504B5BEF04250F5A626DB691F565FA7E40B2449846B1B1ACE5D20E87A9B66A79AD69A5CA91AAE5F26F55BB7434322C715D31B88473C5322514559D8E6993AEE852218A324B05394D681E33776A72539777BF267D39627218079AE0460E3274A46155D7782F7B28BFD9833DCAB839DC1E0EBA7FDB1E2E0EAD7B7593516BA23FBFBAE868F27256226E3E7A85DF64A7CF7D31E87384FCC1D893697738F2AC54CFC3DDE7D6633B1F595C59E5D87EDEAA165B3DD2A21C994B6D37DD56523655D24B9D05237BEDDDD8759040CEFB462F8180C53071F462C1B49F5133E84B6AF4D4B58356238C55BE1EF0BE5225F07289EF81EC4FA02348DEF33517381E157098FF4AA794005E370B66889105E6A2BC8FFBC78747C7DAF3CC97F35412701ED13EEF252FDE761284AD8954EB33DE2AD813CAC24794996DE34EA6031F005E5C35855AB6F6DC5E5E6FBD7AE911FC2DF6D04BAFF161DC87AF58845713FFF782EED4BBFAF993223DF06E32F0CF53EFD0FB634F6DF87E281DD46CFE1AE134CC63763CA53BD3996BAD4968BB52EA2D1A9AE9812F45F62C7C2989876D5C100DD8D665A7DDDAADAA0933BC23AAB5167669C6EDD45475DD7C3F4F1FF5AB6A9D5AABD0E1863A324ADF1B760E494060EF2C2C8B9C29E2218A4C7F90F561E7EE458B5017607BB3F5591DF817038BFD22362408BE305E6C978486C5746359ECF41FC24A5FEBBD24529CF7B0BDE3C4FE6A6176427B3C4BB85F25CA6B18D48F0F320C9519CED165B7BE58B81F2C6C9CED5D71DB6386EB2DC3C6D5DA2AB74A6B67BC9972CA6CDDE2F33DA4B48CD6E8126F7D4E30DF20F6FA5852BF7474BD99383A2FC34575C41F5B6768AF87AC5E633A0F69EFE6E8A15AEBEEBDC40107BC0499DD1B08578D6F68215272B2DCB0905FD4321CB60255BDE68A2D922A5C6A12554BB4DA7C8605827B2B3ACB0459A050C07488E136283F48535F355CC40F38BA6237B948730147C6F1036D7DF822E36ED7FEC573575BE6F14D5A7C04B38F238098445EBD6FD8BB9C34BEDEB8B45C121C2C6440573744694B216F8ACB75CDE93A613D1929F5D579E81EC7290566FC86CDD113DE45B60F1CFF8497285C574D383793ED8668AB7D7C4ED0324331573C36F4F013301CC5AB37FF005BDA926D4A2E0000 , N'6.1.3-40302')
END

